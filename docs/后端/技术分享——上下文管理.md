---
tag: Python
---


# æŠ€æœ¯åˆ†äº«â€”â€”ä¸Šä¸‹æ–‡ç®¡ç†

### é—®é¢˜ï¼š å¦‚ä½•è®°å½•å®Œæ•´çš„è¯·æ±‚æ—¥å¿—ï¼Ÿ

æƒ…æ™¯ï¼š åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨å…³é”®æ•°æ®èŠ‚ç‚¹ä¸Šè®°å½•å½“å‰ç¯å¢ƒçš„å·¥ä½œæ—¥å¿—ã€‚é€šå¸¸ï¼Œä¸€ä¸ªè¯·æ±‚ä¼šæ¶‰åŠå¤šä¸ªè¿™æ ·çš„æ•°æ®èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå‘æ—¥å¿—æ–‡ä»¶ä¸­å†™å…¥è‡³å°‘ä¸€æ¡æ—¥å¿—ã€‚è¿™å°±å¯èƒ½äº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼šå½“å¤šä¸ªè¯·æ±‚æ˜¯ä¸²è¡Œå¤„ç†æ—¶ï¼Œæ—¥å¿—çš„è®°å½•é¡ºåºè¿˜æ¯”è¾ƒå®¹æ˜“ç®¡ç†ï¼Œä½†åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œå¤šä¸ªè¯·æ±‚åŒæ—¶å†™å…¥æ—¥å¿—æ—¶ï¼ŒåŒä¸€ä¸ªè¯·æ±‚çš„æ—¥å¿—ä¿¡æ¯å¯èƒ½ä¼šè¢«æ‰“ä¹±ï¼Œå¯¼è‡´æ—¥å¿—è®°å½•å˜å¾—æ··ä¹±ã€‚

**æœŸæœ›ï¼š** å¦‚ä½•åšåˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œäº§ç”Ÿä¸€æ¡æ—¥å¿—ï¼Œ å¹¶ä¸”è¿™ä¸ªæ—¥å¿—åŒ…å«æ‰€æœ‰çš„èŠ‚ç‚¹è®°å½•ä¿¡æ¯ï¼ˆå¹¶ä¸”æœ€å¥½è‡ªåŠ¨è¡¥å……ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼ŒæœåŠ¡åç§°ï¼ŒæœåŠ¡æ—¶é—´ï¼Œè°ƒç”¨æœåŠ¡å¯¹è±¡ç­‰ï¼‰

::: code-group

```bash[æ¨¡æ‹Ÿå¹¶å‘æƒ…å†µ <1,2> ]
æ—¥å¿—æ··ä¹±æƒ…æ™¯ï¼Œå¯¼è‡´äº†æ—¥å¿—ä¸å¥½è¿½è¸ªå’Œåˆ†æ
2024-09-18 12:34:56 - ExampleService - <1> - Request started
2024-09-18 12:34:56 - ExampleService - <2> - Request started
2024-09-18 12:34:56 - ExampleService - <1> - Node: Node1, Data: {'data': 'value1'}
2024-09-18 12:34:56 - ExampleService - <1> - Node: Node2, Data: {'data': 'value2'}
2024-09-18 12:34:56 - ExampleService - <2> - Node: Node1, Data: {'data': 'value1'}
2024-09-18 12:34:56 - ExampleService - <2> - Node: Node2, Data: {'data': 'value2'}
2024-09-18 12:34:56 - ExampleService - <2> - Request ended
2024-09-18 12:34:56 - ExampleService - <1> - Request ended
```
```bash[æœŸæœ›]
INFO:ExampleService:<1> - Request started 
Service: ExampleService, Duration: 0.20s
Node: Node1, Data: {'data': 'value1'}
Node: Node2, Data: {'data': 'value2'}
Request ended

INFO:ExampleService:<2> - started
Service: ExampleService, Duration: 0.20s
Node: Node1, Data: {'data': 'value1'}
Node: Node2, Data: {'data': 'value2'}
Request ended
```

:::
è§£å†³æ€è·¯ï¼š

- loggeræ—¶æœº
    
    é€šè¿‡ä¸Šè¿°ä¾‹å­å¯¹æ¯”å‘ç°ï¼Œä¸å°±æ˜¯å°†å¤šæ¡è®°å˜æˆä¸€æ¡è®°å½•å—ï¼Œæ—¢åªèƒ½loggerä¸€æ¬¡ï¼Œå…ˆæŠŠæ‰€æœ‰å…³é”®èŠ‚ç‚¹loggerçš„ä¿¡æ¯æš‚æ—¶å­˜åˆ°ä¸€ä¸ªåœ°æ–¹ï¼Œæœ€åç»Ÿä¸€loggerï¼Œæ‰€ä»¥loggeræ—¶é—´ç‚¹åªèƒ½æ”¾åœ¨è¯·æ±‚çš„å®Œæˆæ—¶åˆ»ï¼ˆæ­£å¸¸å®Œæˆã€å¼‚å¸¸å®Œæˆï¼‰
    
- å¦‚ä½•æš‚æ—¶å­˜å‚¨å…³é”®ç‚¹loggerä¿¡æ¯ã€‚
    
    å°†å…³é”®èŠ‚ç‚¹çš„æƒ³è¦æ‰“å°çš„ä¿¡æ¯ï¼Œæ”¾åˆ°**ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­ï¼Œ**è¯¥å¯¹è±¡åœ¨è¯·æ±‚å¼€å§‹æ—¶è¢«åˆ›å»ºï¼Œåœ¨è¯·æ±‚å®Œæˆçš„æ—¶å€™æ¯”é‡Šæ”¾ï¼Œç›¸å½“äºä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå’Œè¯·æ±‚ç›¸åŒçš„ä»“åº“ï¼Œåœ¨å…³é”®èŠ‚ç‚¹ï¼Œæˆ‘ä»¬åªéœ€è¦å°†è¦æ‰“å°çš„ä¿¡æ¯ï¼Œæ”¾åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¸­å­˜å‚¨ï¼Œåœ¨è¯·æ±‚å®Œæˆçš„æ—¶å€™å°†å¯¹è±¡ä¸­çš„ä¿¡æ¯æ‰“å°ï¼Œå¹¶ä¸”é‡Šæ”¾è¯¥å¯¹è±¡ã€‚
    

## ä¸Šä¸‹æ–‡ç»„ä»¶

---



åŒ…ï¼šcontext

å¯¹è±¡[æ•°æ®ç»“æ„]ï¼šContenxtManager

æ¥å£ï¼š get_context_managerã€context_getã€ context_setã€context_appendã€ format_context_dataã€clear_context

çº¦å®šï¼šå¤–éƒ¨ä½¿ç”¨ï¼Œåªä½¿ç”¨è¯¥ç»„ä»¶æä¾›çš„æ¥å£ï¼Œä¸è¦å¯¹è·å–çš„å¯¹è±¡ç›´æ¥æ“ä½œ

| **æ–¹æ³•å** | **ä½œç”¨** | **ç¤ºä¾‹** |
| --- | --- | --- |
| `get_context_manager` | è·å–å•ä¾‹ `_ContextManager` å®ä¾‹ï¼Œç”¨äºç®¡ç†çº¿ç¨‹æœ¬åœ°çš„ä¸Šä¸‹æ–‡æ•°æ®ã€‚ |  `manager = get_context_manager()` |
| `context_set` | ä½¿ç”¨æŒ‡å®šçš„é”®å€¼å¯¹è®¾ç½®çº¿ç¨‹æœ¬åœ°çš„ä¸Šä¸‹æ–‡æ•°æ®ã€‚ |  `context_set('user_id', 123)` |
| `context_get` | æ ¹æ®æŒ‡å®šçš„é”®è·å–çº¿ç¨‹æœ¬åœ°çš„ä¸Šä¸‹æ–‡æ•°æ®ï¼Œå¦‚æœé”®ä¸å­˜åœ¨åˆ™è¿”å› `None`ã€‚ | `python user_id = context_get('user_id')` |
| `context_append` | åœ¨ç°æœ‰çš„ä¸Šä¸‹æ–‡æ•°æ®ä¸­è¿½åŠ å€¼ã€‚å¦‚æœå¯¹åº”é”®çš„å€¼å·²ç»æ˜¯åˆ—è¡¨ï¼Œåˆ™å°†æ–°å€¼è¿½åŠ åˆ°åˆ—è¡¨ï¼›å¦åˆ™ï¼Œå°†å½“å‰å€¼ä¸æ–°å€¼å­˜ä¸ºåˆ—è¡¨ã€‚ | `context_append('error_message', 'Invalid password')` |
| `format_context_data` | æ ¼å¼åŒ–å½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡æ•°æ®ä¸ºé”®å€¼å¯¹å½¢å¼ï¼Œå¸¸ç”¨äºæ—¥å¿—è®°å½•ï¼Œè¿‡æ»¤æ‰å€¼ä¸º `None` çš„å­—æ®µã€‚ | `formatted_data = format_context_data()` |
| `clear_context` | æ¸…ç©ºå½“å‰çº¿ç¨‹çš„æ‰€æœ‰ä¸Šä¸‹æ–‡æ•°æ®ã€‚ |  `clear_context()` |

## ä½¿ç”¨ä¸Šä¸‹æ–‡ç»„ä»¶ï¼Œå®ç°ä¸€ä¸ªé’ˆå¯¹äºå¤„ç†æ—¥å¿—é—®é¢˜çš„ä¸Šä¸‹æ–‡è£…é¥°å™¨ï¼Œå¹¶ä¸”è‡ªåŠ¨å®ç°æ—¥å¿—çš„è¾“å‡º

---

- `@api_context(service_name:str)` â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”è£…é¥°å™¨
    
    ```python
    # è·å–ä¸Šä¸‹æ–‡ç®¡ç†å™¨å•ä¾‹
    from django.utils import timezone
    from functools import wraps
    
    from starmerx_warehouse.utils.context.utils.out import context_get, format_context_data, get_context_manager
    
    context_manager = get_context_manager()
    
    def api_context(service_name):
        """
            åˆå§‹åŒ–ä¸Šä¸‹æ–‡çš„è£…é¥°å™¨ï¼Œåœ¨è°ƒç”¨è§†å›¾å‡½æ•°ä¹‹å‰è®¾ç½®ä¸Šä¸‹æ–‡ç¯å¢ƒ
            service_name : æœ¬æ¬¡çš„æœåŠ¡åç§°ï¼Œç”¨äºåŒºåˆ†ä¸åŒæœåŠ¡
        """
    
        def decorator(func):
    
            @wraps(func)
            def wrapper(request, *args, **kwargs):
                _request = request.request
                # æ¸…ç©ºæ—§çš„ä¸Šä¸‹æ–‡æ•°æ®
                context_manager.clear()
    
                # åœ¨æ­¤åˆå§‹åŒ–æ–°çš„ä¸Šä¸‹æ–‡æ•°æ®
                context_manager.set_value('request_time', timezone.localtime())
                context_manager.set_value('request_url', _request.path)
                context_manager.set_value('service_name', service_name)
    
                # å¦‚æœæœ‰ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼Œå¯ä»¥å°†ç”¨æˆ·ä¿¡æ¯åŠ å…¥ä¸Šä¸‹æ–‡
                if _request.user.is_authenticated:
                    context_manager.set_value('user_id', _request.user.id)
                    context_manager.set_value('username', _request.user.username)
    
                # è°ƒç”¨å®é™…çš„è§†å›¾å‡½æ•°
                try:
                    response = func(request, *args, **kwargs)
                except Exception as e:
                    context_manager.set_value('error_message', str(e))
                    raise e
                finally:
                    log_context()
                    context_manager.clear()
                return response
    
            return wrapper
    
        return decorator
    
    def log_context():
        """
        è®°å½•ä¸Šä¸‹æ–‡æ•°æ®ï¼Œåœ¨è§†å›¾å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œå°†ä¸Šä¸‹æ–‡æ•°æ®è®°å½•åˆ°æ—¥å¿—ä¸­
        """
        from starmerx_warehouse.utils.log_utils import log
        file_name = 'api_context_' + context_get('service_name')
        logger = log(file_name)
        logger.info(format_context_data())
    
    ```
    
- **step1ï¼š ä½¿ç”¨è¯¥è£…é¥°å™¨**

```python
    @api_context(service_name='å¤„ç†è¡¥æ‹£ä»»åŠ¡')
    def process_replenishment_task(self, sku, warehouse_id, rack, user):
        """
             å¤„ç†è¡¥æ‹£ä»»åŠ¡
             :param sku: SKU
             :param warehouse_id: ä»“åº“id
             :param rack: åº“ä½
             :param user: ç”¨æˆ·å¯¹è±¡
        """
        with transaction.atomic():
            MissingGoodsReplenishmentService(user).process_replenishment_task(sku, warehouse_id, rack)
            return Response(msg="å¤„ç†æˆåŠŸ", status=status.HTTP_200_OK)
```

- **step2: å…³é”®æ•°æ®èŠ‚ç‚¹ï¼Œå°†ä¿¡æ¯å­˜æ”¾åˆ°ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­**

```python
 def cut_lock_rack_by_order(self, cut_num: int, order_id: int):
        """
        æ ¹æ®è®¢å•æ‰£å‡é”å®šåº“å­˜ã€‚

        :param cut_num: éœ€è¦æ‰£å‡çš„é”å®šåº“å­˜æ•°é‡ã€‚
        :param order_id: è®¢å•çš„å”¯ä¸€æ ‡è¯† IDã€‚
        """
        **# æ›´æ–°ä¸Šä¸‹æ–‡ä¿¡æ¯
        context_append('inter_service_name', 'å ç”¨åº“å­˜æ‰£å‡')
        data = {
            'service_name': 'å ç”¨åº“å­˜æ‰£å‡',
            'state': 'æ¨é€ä¸­.....',
            'id': self.id,
            'cut_num': cut_num,
            'order_id': order_id,
            'rack_name': self.rack_manage.rack_name,
            'current_lock_qty': self.lock_qty,
            'current_stock_qty': self.stock_qty
        }
        context_append('process_info', data)**
        type = 'cut'  # æ“ä½œç±»å‹ä¸ºæ‰£å‡
        erp_shipment_id = Order.objects.get(idorder=order_id).erp_shipment_id  # æ ¹æ®è®¢å• ID è·å–å¯¹åº”çš„ ERP å‘è´§å• ID
        self.__wms_lock_rack_operation(type, erp_shipment_id, cut_num)  # æ‰§è¡Œé”å®šåº“å­˜æ“ä½œ
        
        
        
def __wms_lock_rack_operation(self, type: str, erp_shipment_id: int, num: int):
  """
  æ‰§è¡Œä¸ WMS ç³»ç»Ÿäº¤äº’çš„é”å®šåº“å­˜æ“ä½œã€‚

  è¯¥æ–¹æ³•é€šè¿‡ HTTP è¯·æ±‚å°†é”å®šåº“å­˜çš„æ“ä½œè¯·æ±‚å‘é€è‡³ WMS ç³»ç»Ÿï¼ŒåŒ…æ‹¬å¢åŠ æˆ–æ‰£å‡åº“å­˜ã€‚

  :param type: æ“ä½œç±»å‹ï¼ˆ'cut', 'add', 'readd'ï¼‰ã€‚
  :param erp_shipment_id: éœ€è¦æ“ä½œçš„ ERP å‘è´§å• IDã€‚
  :param num: æ“ä½œçš„åº“å­˜æ•°é‡ã€‚
  """
  # æ„å»ºå‘é€è‡³ WMS ç³»ç»Ÿçš„è¯·æ±‚æ•°æ®
  data = {
      'user_id': 1,  # æ“ä½œç”¨æˆ· ID
      'shipments': []  # å­˜å‚¨å‘è´§å•çš„æ“ä½œä¿¡æ¯
  }
  # æ„å»ºå•ä¸ªå‘è´§å•æ“ä½œçš„ä¿¡æ¯
  shipment_item = {
      'erp_shipment_id': erp_shipment_id,
      'sku': self.product.default_code,  # è·å–äº§å“çš„ SKU ç¼–ç 
      'type': type,  # æ“ä½œç±»å‹
      'rack_list': [
          {
              'rack': self.rack_manage.rack_name,  # è·å–è´§æ¶åç§°
              'qty': num  # åº“å­˜æ“ä½œçš„æ•°é‡
          }
      ]
  }
  data['shipments'] = [shipment_item]  # å°†æ„å»ºçš„å‘è´§å•æ“ä½œä¿¡æ¯æ·»åŠ åˆ°è¯·æ±‚æ•°æ®ä¸­
  # æ„å»ºå¹¶å‘é€ HTTP è¯·æ±‚åˆ° WMS ç³»ç»Ÿ
  request = (HttpRequest()
             .header('Content-Type', 'application/json')
             .put(WMS_URL + 'sale/sale_order/lock_orders/')
             .body(data))

  try:
      response = request.execute().body_json()  # æ‰§è¡Œè¯·æ±‚å¹¶è·å–å“åº”
      **data = {
          'service_name': '[wms-.-out]é”å®šåº“å­˜æ‰£å‡/å¢åŠ æ“ä½œ',
          'state': 'æ¨é€æˆåŠŸ',
          'params/data': data,
          'response': response,
          'after_lock_qty': StockProductRackManage.objects.using('wms_starmerx').get(id=self.id).lock_qty,
          'after_stock_qty': StockProductRackManage.objects.using('wms_starmerx').get(id=self.id).stock_qty
      }
      context_append('process_info', data)  # æ›´æ–°ä¸Šä¸‹æ–‡ä¿¡æ¯**
      if response['code'] == 0:
          return response  # å¦‚æœå“åº”ç ä¸º 0ï¼Œè¡¨ç¤ºæ“ä½œæˆåŠŸï¼Œè¿”å›å“åº”æ•°æ®
      else:
          if response.get('failed_list'):
              error_messages = []
              for error in response.get('failed_list'):
                  for key, value in error.items():
                      error_messages.append(f'{key}: {value}')
              final_error_message = '; \n'.join(error_messages)
              raise OperationFailedException(final_error_message)
          raise OperationFailedException(response['msg'])  # å¦åˆ™ï¼ŒæŠ›å‡ºæ“ä½œå¤±è´¥å¼‚å¸¸ï¼Œå¹¶åŒ…å«é”™è¯¯ä¿¡æ¯
  except Exception as e:
      raise e  # æ•è·å¹¶æŠ›å‡ºæ‰€æœ‰å…¶ä»–å¼‚å¸¸

```

<aside>
ğŸ’¡

çº¦å®šå­—æ®µè§£é‡Š

- **`request_time`**: è®°å½•å½“å‰è¯·æ±‚çš„æ—¶é—´ï¼Œç”¨äºæ ‡è®°è¯·æ±‚å¼€å§‹çš„æ—¶é—´æˆ³ã€‚
- **`request_url`**: è®°å½•è¯·æ±‚çš„URLï¼Œå¸®åŠ©å®šä½å½“å‰è¯·æ±‚çš„å…·ä½“è·¯å¾„ã€‚
- **`service_name`**: ç”¨äºåŒºåˆ†å½“å‰è¯·æ±‚æ‰€å±çš„æœåŠ¡ï¼Œæ ‡è¯†å½“å‰è¯·æ±‚çš„æœåŠ¡åç§°ã€‚
- **`user_id`**: è®°å½•è¯·æ±‚ç”¨æˆ·çš„IDï¼Œç”¨äºåœ¨æ—¥å¿—ä¸­å…³è”å…·ä½“çš„ç”¨æˆ·æ“ä½œã€‚
- **`username`**: è®°å½•è¯·æ±‚ç”¨æˆ·çš„ç”¨æˆ·åï¼Œä¾¿äºè°ƒè¯•æ—¶è¯†åˆ«ç”¨æˆ·èº«ä»½ã€‚
- **`inter_service_name`**: è®°å½•ç”Ÿå‘½å‘¨æœŸä¸­è°ƒç”¨çš„ä¸­é—´æœåŠ¡åç§°ï¼Œé€‚ç”¨äºå¾®æœåŠ¡æ¶æ„æˆ–å¤æ‚ä¸šåŠ¡æµç¨‹ã€‚
- **`process_info`**: è®°å½•åœ¨ç”Ÿå‘½å‘¨æœŸä¸­äº§ç”Ÿçš„ä¸­é—´è¿‡ç¨‹ä¿¡æ¯ï¼Œå¸®åŠ©è¿½è¸ªä¸šåŠ¡é€»è¾‘æ‰§è¡Œçš„çŠ¶æ€ã€‚
- **`error_message`**: å½“å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œè®°å½•é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºåç»­è°ƒè¯•å’Œæ’æŸ¥é—®é¢˜ã€‚

ç¤ºä¾‹ï¼š

```python
 {
    "request_time": "2024-09-19 10:30:45",  # è¯·æ±‚æ—¶é—´
    "request_url": "/api/warehouse/cut_lock_rack_by_order/",  # è¯·æ±‚çš„APIè·¯å¾„
    "service_name": "å¤„ç†è¡¥æ‹£ä»»åŠ¡",  # ä¸»æœåŠ¡åç§°
    "user_id": 12345,  # ç”¨æˆ·ID
    "username": "warehouse_operator",  # ç”¨æˆ·å
    "inter_service_name": "å ç”¨åº“å­˜æ‰£å‡",  # ä¸­é—´è°ƒç”¨æœåŠ¡çš„åç§°
    "process_info": [
        {
            "service_name": "å ç”¨åº“å­˜æ‰£å‡",
            "state": "æ¨é€ä¸­.....",
            "id": 1,
            "cut_num": 5,
            "order_id": 56789,
            "rack_name": "Rack-101",
            "current_lock_qty": 20,
            "current_stock_qty": 100
        },
        {
            "service_name": "[wms-.-out]é”å®šåº“å­˜æ‰£å‡/å¢åŠ æ“ä½œ",
            "state": "æ¨é€æˆåŠŸ",
            "params/data": {
                "user_id": 1,
                "shipments": [
                    {
                        "erp_shipment_id": 98765,
                        "sku": "SKU123456",
                        "type": "cut",
                        "rack_list": [
                            {
                                "rack": "Rack-101",
                                "qty": 5
                            }
                        ]
                    }
                ]
            },
            "response": {
                "code": 0,
                "message": "æ“ä½œæˆåŠŸ"
            },
            "after_lock_qty": 15,
            "after_stock_qty": 95
        }
    ],
    "error_message": null  # å¦‚æœæ“ä½œè¿‡ç¨‹ä¸­æ²¡æœ‰é”™è¯¯ï¼Œæ­¤å­—æ®µä¸ºnull
}  
```

</aside>

### æ—¶åºå›¾

## åŸç†

---

### 1. **çº¿ç¨‹å®‰å…¨**

ç”±äºæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„å±€éƒ¨å­˜å‚¨ï¼Œä¸Šä¸‹æ–‡æœºåˆ¶å¯ä»¥é¿å…çº¿ç¨‹é—´çš„æ•°æ®æ±¡æŸ“ã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œçº¿ç¨‹å±€éƒ¨å­˜å‚¨ç¡®ä¿äº†æ¯ä¸ªè¯·æ±‚çš„æ•°æ®éƒ½æ˜¯éš”ç¦»çš„ã€‚

### 2. **ç”Ÿå‘½å‘¨æœŸç®¡ç†**

åœ¨ Web åº”ç”¨ä¸­ï¼Œæ¯ä¸ªè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š

- **è¯·æ±‚å¼€å§‹**: æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œåˆå§‹åŒ–ä¸Šä¸‹æ–‡ï¼Œè®°å½•åˆå§‹ä¿¡æ¯ï¼ˆå¦‚ `request_time`ã€`request_url`ï¼‰ã€‚
- **å¤„ç†ä¸­**: è¯·æ±‚åœ¨å¤šä¸ªæ¨¡å—ä¸­æµè½¬ï¼Œä¸æ–­æ›´æ–°ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¦‚ `process_info`ï¼‰ã€‚
- **ç»“æŸ**: è¯·æ±‚å¤„ç†å®Œæ¯•ï¼Œä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®è¢«è®°å½•åˆ°æ—¥å¿—æˆ–æ¸…ç†ã€‚

## æ‰©å±•

---

- **ç›‘æ§ä¸è­¦æŠ¥**
    1. è¿™ä¸ªæ­£åœ¨å®ç°ï¼Œå°¤å…¶å¯¹äºé‚£ç§æ•æ„Ÿæ•°æ®å¤„ç†å¼‚å¸¸ï¼Œé€‚åˆä½¿ç”¨
- **å®¡è®¡å’Œè¿½è¸ª**
- **æ€§èƒ½åˆ†æ**
    1. åœ¨wmsä¸­ä¸Šä¸‹æ–‡æ—¥å¿—ä¸­è‡ªåŠ¨è®°å½•äº†æœåŠ¡çš„è°ƒç”¨æ—¶é—´ï¼ˆè·ç¦»åˆå§‹è°ƒç”¨ï¼‰ï¼Œå¯ä»¥ä¾æ®è¿™ä¸ªè®¡ç®—è€—æ—¶æœåŠ¡/ä»£ç æ®µ
- **æ•°æ®å…±äº«å’Œä¼ é€’**
    1. ä¸åŒæœåŠ¡ä¸­çš„æ•°æ®è·å–é™¤äº†æœ¬èº«çš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥æ¥è‡ªäºä¸Šä¸‹æ–‡å¯¹è±¡ä¸­